/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   wildcard.c                                         :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: teando <teando@student.42tokyo.jp>         +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2025/04/15 15:45:55 by teando            #+#    #+#             */
/*   Updated: 2025/04/15 15:48:03 by teando           ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include "core.h"

/*
** ディレクトリ内のファイルをスキャンする関数
** dir_path: スキャンするディレクトリのパス
** pattern: マッチングパターン
** shell: シェル構造体
** returns: マッチしたファイル名のリスト
*/
t_list *scan_directory(const char *dir_path, const char *pattern, t_shell *shell)
{
    // 1. ディレクトリをオープン
    // 2. ディレクトリ内のエントリを順に読み込む
    // 3. 各エントリに対してパターンマッチングを実行
    // 4. マッチしたエントリをリストに追加
    // 5. ディレクトリをクローズして結果を返す
}

/*
** マッチ結果をソートする関数
** matches: マッチしたファイル名のリスト
** returns: ソートされたリスト
*/
t_list *sort_matches(t_list *matches)
{
    // 1. リストをソート可能な配列に変換
    // 2. アルファベット順にソート
    // 3. ソートされた配列を新しいリストに変換して返す
}

/*
** パターンとファイル名がマッチするか確認する関数
** pattern: パターン文字列（例: "*.c"）
** filename: ファイル名
** returns: マッチする場合は1、しない場合は0
*/
int match_pattern(const char *pattern, const char *filename)
{
    // 1. パターンが空の場合はファイル名も空ならマッチ
    // 2. '*'の場合は残りのパターンが残りのファイル名のどこかにマッチするか再帰的に確認
    // 3. '?'の場合は1文字スキップして残りのパターンとファイル名をマッチング
    // 4. 通常の文字の場合は文字が一致するか確認し、残りのパターンとファイル名をマッチング
    // 5. エスケープ文字'\'の場合は次の文字を通常の文字として扱う
}

/*
** AST内のワイルドカードを展開する関数
** ast: 展開対象のAST
** shell: シェル構造体
** returns: 成功時はSUCCESS、失敗時はFAILURE
*/
t_status expand_wildcards_in_ast(t_ast *ast, t_shell *shell)
{
    // 1. ASTがNULLの場合は成功を返す
    // 2. ASTのノードタイプに応じて処理を分岐
    //    - NT_CMD: コマンド引数内のワイルドカードを展開
    //    - NT_PIPE, NT_LIST, NT_AND, NT_OR: 左右の子ノードを再帰的に処理
    // 3. コマンド引数のリスト（argv）を走査
    // 4. 各引数がワイルドカードを含む場合は展開
    // 5. 展開結果を元の引数リストに置き換え
}

/*
** ワイルドカードパターンを展開する関数
** pattern: 展開するパターン（例: "*.c"）
** shell: シェル構造体
** returns: マッチしたファイル名のリスト、マッチしない場合はNULL
*/
t_list *expand_wildcard(const char *pattern, t_shell *shell)
{
    // 1. パターンにワイルドカード文字が含まれているか確認
    // 2. パターンからディレクトリパスとファイル名パターンを分離
    // 3. ディレクトリをスキャンしてマッチするファイルを検索
    // 4. マッチ結果をソート
    // 5. マッチするファイルがない場合は元のパターンを返す
}
